(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["page-gis-map-floorplan~31ecd969"],{"4de4":function(t,e,a){"use strict";var i=a("23e7"),r=a("b727").filter,n=a("1dde"),o=n("filter");i({target:"Array",proto:!0,forced:!o},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},"81d5":function(t,e,a){"use strict";var i=a("7b0b"),r=a("23cb"),n=a("50c4");t.exports=function(t){var e=i(this),a=n(e.length),o=arguments.length,s=r(o>1?arguments[1]:void 0,a),c=o>2?arguments[2]:void 0,l=void 0===c?a:r(c,a);while(l>s)e[s++]=t;return e}},"92e8":function(t,e,a){"use strict";a.r(e);var i,r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{position:"fixed",top:"10px",left:"60px","z-index":"100000",width:"50px"}},[a("button",{staticClass:"btn btn-sm btn-dark  ",attrs:{type:"button"},on:{click:function(e){t.listkategori=!t.listkategori}}},[a("span",{staticClass:"typcn typcn-th-large"})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.listkategori,expression:"listkategori"}],staticClass:"shadow rounded-lg p-3 bg-white animated fadeInLeft",staticStyle:{position:"fixed",top:"50px",left:"60px","z-index":"100000","min-width":"30vw"}},t._l(t.listPeta,(function(e,i){return a("div",{key:i+"listpeta",staticClass:"bord   text-left pl-3 shadow rounded-lg",staticStyle:{"font-size":"13px"},on:{click:function(e){return t.bawah(e)}}},[a("span",{staticClass:"typcn typcn-map",on:{click:function(e){return t.parent(e)}}},[a("span",{staticClass:"pl-2"},[t._v(t._s(e.kategori))])]),a("span",{staticClass:"typcn typcn-arrow-down float-right"}),a("ul",{staticClass:"isaktif  anim mb-3  animated slideInLeft "},[a("li",{staticClass:"bord  text-left p-1 shadow",staticStyle:{"font-size":"13px"}},[a("p",{staticClass:"p-1",on:{click:function(e){return t.muncul(e)}}},[a("input",{attrs:{type:"checkbox",id:"marker",value:"marker",checked:""},on:{click:function(a){return t.loadmarker(e.id)}}}),a("label",{attrs:{for:"marker"}}),a("span",{staticClass:"typcn typcn-pin"}),t._v("Custom Marker ")]),a("div",{staticClass:"isaktif"},t._l(t.listMarker,(function(i,r){return a("div",{directives:[{name:"show",rawName:"v-show",value:i.id_peta==e.id,expression:"item2.id_peta==item.id"}],key:r+"icon",staticClass:"hover:bg-green-400 text-xs pl-3"},[a("span",{staticClass:"typcn typcn-arrow-right ml-1"}),t._v(" "+t._s(i.title)+" ")])})),0)]),a("li",{staticClass:"bord  text-left p-1 shadow",staticStyle:{"font-size":"13px"}},[a("p",{on:{click:function(e){return t.muncul(e)}}},[a("span",{staticClass:"typcn typcn-map"}),t._v(" Pilihan ")]),a("div",{staticClass:"isaktif"},t._l(t.listGeojson,(function(r,n){return a("div",{directives:[{name:"show",rawName:"v-show",value:r.id_peta==e.id,expression:"item3.id_peta==item.id"}],key:n+"icon",staticClass:"hover:bg-green-400"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.layers["geojson"+r.id+"on"],expression:"layers['geojson'+item3.id+'on']"}],staticClass:"ml-3",attrs:{type:"checkbox",id:"pilihan"+i},domProps:{checked:Array.isArray(t.layers["geojson"+r.id+"on"])?t._i(t.layers["geojson"+r.id+"on"],null)>-1:t.layers["geojson"+r.id+"on"]},on:{click:function(e){return t.loadgeojson(r)},change:function(e){var a=t.layers["geojson"+r.id+"on"],i=e.target,n=!!i.checked;if(Array.isArray(a)){var o=null,s=t._i(a,o);i.checked?s<0&&t.$set(t.layers,"geojson"+r.id+"on",a.concat([o])):s>-1&&t.$set(t.layers,"geojson"+r.id+"on",a.slice(0,s).concat(a.slice(s+1)))}else t.$set(t.layers,"geojson"+r.id+"on",n)}}}),a("label",{attrs:{for:"pilihan"+i}},[a("span",{staticClass:"typcn typcn-arrow-right ml-1"}),t._v(" "+t._s(r.title))])])})),0)])])])})),0),t.ready?a("div",[a("div",{staticStyle:{height:"100vh",width:"100vw",background:"white"},attrs:{id:"mapid"}})]):t._e()])},n=[],o=(a("4de4"),a("4160"),a("159b"),a("99af"),a("4795"),a("5319"),a("ac1f"),a("cb29"),a("b64b"),a("caad"),a("c975"),a("4b97")),s=(a("2ef0"),a("bc3a")),c=a.n(s),l=new o["a"],d={data:function(){return{photoSize:[-30.865,155.2094],ready:!1,center:[-33.865,151.2094],loading:!0,listPeta:[],listMarker:[],listGeojson:[],listgeojson:[],geojson:[],geoJsonLayer:{},layers:{},vdata:{},markers:{},listkategori:!1}},watch:{},methods:{events:function(t){alert(t)},bawah:function(t){t.target.querySelectorAll("ul").length>0&&t.target.querySelectorAll("ul")[0].classList.toggle("isaktif")},muncul:function(t){t.target.nextElementSibling.classList.toggle("isaktif")},parent:function(t){t.target.parentNode.click()},loadListPeta:function(){var t=this;l.collection("app_gis_kategori").doc().get("*","where id='".concat(this.$route.query.id,"' order by id")).then((function(e){t.listPeta=e,t.$forceUpdate()})),l.collection("app_gis_marker").doc().get("*","where tb1.id_peta='".concat(this.$route.query.id,"' order by id")).then((function(e){t.listMarker=e,t.$forceUpdate()})),l.collection("app_gis_geojson").doc().get("*","where tb1.id_peta='".concat(this.$route.query.id,"' order by id")).then((function(e){t.listGeojson=e,t.$forceUpdate()})),l.collection("app_gis_marker",!1).doc().select("select floorplan from app_gis_marker where id_peta='".concat(t.$route.query.id,"'")).then((function(e){console.log(e),e.length>0&&(t.vdata.floorplan=e[0].floorplan,t.$forceUpdate()),t.loadmap()}))},loadmarker:function(t){var e=this,a=this.listMarker;a=a.filter((function(e){return e.id_peta==t})),a.length>0&&a.forEach((function(t,a){if(i.hasLayer(e.markers["marker"+t.id]))return i.removeLayer(e.markers["marker"+t.id]),void(e.markers["marker"+t.id+"on"]=!1);if(e.markers["marker"+t.id+"on"]=!0,console.log("listicon",t),"icon"==t.kategori){console.log("icon",t);var r=L.icon({iconUrl:t.icon,iconSize:[28,75],iconAnchor:[12,54],popupAnchor:[-3,-26]});"click"==t.popup?e.markers["marker"+t.id]=L.marker([t.lat,t.lng],{icon:r}).bindPopup('\n                        <div class="text-xs">\n                            <div class="font-bold uppercase">'.concat(t.title,'</div>\n                            <div class="text-justify">').concat(t.deskripsi,"</div>\n                            ").concat(t.gambar?'<a href="'.concat(t.gambar,'" class="mt-2" target="__blank"><img src="').concat(t.gambar,'" class="mt-2" style="height:100px;width:100px;" /></a>'):"","\n                        </div>\n                        "),{maxWidth:500}).addTo(i).addEventListener("click",(function(){"false"!=t.event&&t.event&&e.events(t.event)})):e.markers["marker"+t.id]=L.marker([t.lat,t.lng],{icon:r}).bindTooltip('\n                        <div class="text-xs">\n                            <div class="font-bold uppercase">'.concat(t.title,'</div>\n                            <div class="text-justify">').concat(t.deskripsi,"</div>\n                            ").concat(t.gambar?'<a href="'.concat(t.gambar,'" class="mt-2" target="__blank"><img src="').concat(t.gambar,'" class="mt-2" style="height:100px;width:100px;" /></a>'):"","\n                        </div>\n                        "),{permanent:!1,sticky:!0}).addTo(i).addEventListener("click",(function(){"false"!=t.event&&t.event&&e.events(t.event)}))}else if("gambar"==t.kategori){console.log("gambar",t);r=L.icon({iconUrl:t.gambar,iconSize:[48,45],iconAnchor:[12,54],popupAnchor:[-3,-26]});"click"==t.popup?e.markers["marker"+t.id]=L.marker([t.lat,t.lng],{icon:r}).bindPopup('\n                        <div class="text-xs">\n                            <div class="font-bold uppercase">'.concat(t.title,'</div>\n                            <div class="text-justify">').concat(t.deskripsi,"</div>\n                            ").concat(t.gambar?'<a href="'.concat(t.gambar,'" class="mt-2" target="__blank"><img src="').concat(t.gambar,'" class="mt-2" style="height:100px;width:100px;" /></a>'):"","\n                        </div>\n                        "),{maxWidth:500}).addTo(i).addEventListener("click",(function(){"false"!=t.event&&t.event&&e.events(t.event)})):e.markers["marker"+t.id]=L.marker([t.lat,t.lng],{icon:r}).bindTooltip('\n                        <div class="text-xs">\n                            <div class="font-bold uppercase">'.concat(t.title,'</div>\n                            <div class="text-justify">').concat(t.deskripsi,"</div>\n                            ").concat(t.gambar?'<a href="'.concat(t.gambar,'" class="mt-2" target="__blank"><img src="').concat(t.gambar,'" class="mt-2" style="height:100px;width:100px;" /></a>'):"","\n                        </div>\n                        "),{permanent:!1,sticky:!0}).addTo(i).addEventListener("click",(function(){"false"!=t.event&&t.event&&e.events(t.event)}))}else"radius"==t.kategori&&(console.log("radius",t),"click"==t.popup?e.markers["marker"+t.id]=L.circle([t.lat,t.lng],{color:"black",fillColor:t.color,fillOpacity:t.opacity,radius:t.radius}).bindPopup('\n                        <div class="text-xs">\n                            <div class="font-bold uppercase">'.concat(t.title,'</div>\n                            <div class="text-justify">').concat(t.deskripsi,"</div>\n                        </div>\n                        "),{maxWidth:500}).addTo(i).addEventListener("click",(function(){"false"!=t.event&&t.event&&e.events(t.event)})):e.markers["marker"+t.id]=L.circle([t.lat,t.lng],{color:"black",fillColor:t.color,fillOpacity:t.opacity,radius:t.radius}).bindTooltip('\n                      <div class="text-xs">\n                          <div class="font-bold uppercase">'.concat(t.title,'</div>\n                          <div class="text-justify">').concat(t.deskripsi,"</div>\n                      </div>\n                      "),{permanent:!1,sticky:!0}).addTo(i).addEventListener("click",(function(){"false"!=t.event&&t.event&&e.events(t.event)})))}))},loadgeojson:function(t){var e=this;c.a.get(t.geojson).then((function(a){if(i.hasLayer(e.layers["geojson"+t.id]))return i.removeLayer(e.layers["geojson"+t.id]),void(e.layers["geojson"+t.id+"on"]=!1);e.layers["geojson"+t.id]=L.geoJSON(a.data).addTo(i),e.layers["geojson"+t.id+"on"]=!0,"Polygon"==a.data.features[0].geometry.type?i.panTo(new L.LatLng(a.data.features[0].geometry.coordinates[0][0][1],a.data.features[0].geometry.coordinates[0][0][0])):i.panTo(new L.LatLng(a.data.features[0].geometry.coordinates[0][1],a.data.features[0].geometry.coordinates[0][0])),e.loadGeojsonLayer(e.layers["geojson"+t.id]),e.loading=!1,e.$forceUpdate()}))},loadmap:function(){var t=this;this.ready=!0,i=null,setTimeout((function(){var e=[-33.865,151.2094];i=new L.Map("mapid"),i.setView([-32.865,153.2094],8),L.tileLayer("",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}).addTo(i),i.on("click",(function(e){console.log(e),t.posisi[0]=e.latlng.lat,t.posisi[1]=e.latlng.lng,t.modal=!0,t.$forceUpdate()})),console.log("vdata",t.vdata);var a=t.vdata.floorplan,r=[e,t.photoSize];L.imageOverlay(a,r).addTo(i),t.loadmarker(t.$route.query.id)}),1e3)},loadGeojsonLayer:function(t){t.eachLayer((function(t){setTimeout((function(){if(t["_icon"]){var e="";t.feature.properties["marker-symbol"]&&(e=e+"-"+t.feature.properties["marker-symbol"]),t["_icon"].src="https://a.tiles.mapbox.com/v4/marker/pin-m".concat(e,"+").concat(t.feature.properties["marker-color"].replace("#",""),"@2x.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXFhYTA2bTMyeW44ZG0ybXBkMHkifQ.gUGbDOPUN1v1fTs5SeOR4A"),t["_icon"].style.height="80px",t["_icon"].style.width="30px"}"Polygon"==t.feature.geometry.type&&(console.log("polygon"),t["_path"].setAttribute("fill",t.feature.properties.fill),t["_path"].addEventListener("mouseover",(function(){t["_path"].setAttribute("fill","#000")})),t["_path"].addEventListener("mouseout",(function(){t["_path"].setAttribute("fill",t.feature.properties.fill)})),t["_path"].setAttribute("stroke-opacity",t.feature.properties["stroke-opacity"]),t["_path"].setAttribute("stroke-width",t.feature.properties["stroke-width"]),t["_path"].setAttribute("stroke",t.feature.properties.stroke),t["_path"].setAttribute("fill-opacity",t.feature.properties["fill-opacity"])),"LineString"==t.feature.geometry.type&&(console.log("LineString",t),t["_path"].setAttribute("stroke-opacity",t.feature.properties["stroke-opacity"]),t["_path"].setAttribute("stroke-width",t.feature.properties["stroke-width"]),t["_path"].setAttribute("stroke",t.feature.properties.stroke?t.feature.properties.stroke:t.options.color))}),1e3);var e=["stroke","stroke-width","stroke-opacity","fill","fill-opacity","marker-color","marker-size","marker-symbol"],a='<table class="table table-sm table-striped">';Object.keys(t.feature.properties).filter((function(t){if(!e.includes(t))return t})).forEach((function(e){a+="\n                  ".concat(-1!=t.feature.properties[e].indexOf("http")?'<div><a href="'.concat(t.feature.properties[e],'" target="__blank"><img class="viewer" style="height:100px;width:100px;" src="').concat(t.feature.properties[e],'"></a></div>'):'\n                    <tr><td class="capitalize">'.concat(e,"</td><td>").concat(t.feature.properties[e],"</td></tr>                  \n                  "),"\n                  ")})),t.bindTooltip(a+"</table>",{permanent:!1,sticky:!0})}))}},mounted:function(){this.loadListPeta()},metaInfo:{title:"Add Marker dynamic",meta:[{charset:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1"}],link:[{rel:"stylesheet",href:"https://unpkg.com/leaflet@1.7.1/dist/leaflet.css",integrity:"sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==",crossorigin:""}],script:[{src:"https://unpkg.com/leaflet@1.7.1/dist/leaflet.js",integrity:"sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==",crossorigin:""}]}},p=d,u=(a("e739"),a("2877")),f=Object(u["a"])(p,r,n,!1,null,"3e918faf",null);e["default"]=f.exports},"99af":function(t,e,a){"use strict";var i=a("23e7"),r=a("d039"),n=a("e8b5"),o=a("861d"),s=a("7b0b"),c=a("50c4"),l=a("8418"),d=a("65f0"),p=a("1dde"),u=a("b622"),f=a("2d00"),g=u("isConcatSpreadable"),m=9007199254740991,v="Maximum allowed index exceeded",h=f>=51||!r((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),k=p("concat"),y=function(t){if(!o(t))return!1;var e=t[g];return void 0!==e?!!e:n(t)},b=!h||!k;i({target:"Array",proto:!0,forced:b},{concat:function(t){var e,a,i,r,n,o=s(this),p=d(o,0),u=0;for(e=-1,i=arguments.length;e<i;e++)if(n=-1===e?o:arguments[e],y(n)){if(r=c(n.length),u+r>m)throw TypeError(v);for(a=0;a<r;a++,u++)a in n&&l(p,u,n[a])}else{if(u>=m)throw TypeError(v);l(p,u++,n)}return p.length=u,p}})},"9ef3":function(t,e,a){},c975:function(t,e,a){"use strict";var i=a("23e7"),r=a("4d64").indexOf,n=a("a640"),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0,c=n("indexOf");i({target:"Array",proto:!0,forced:s||!c},{indexOf:function(t){return s?o.apply(this,arguments)||0:r(this,t,arguments.length>1?arguments[1]:void 0)}})},caad:function(t,e,a){"use strict";var i=a("23e7"),r=a("4d64").includes,n=a("44d2");i({target:"Array",proto:!0},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n("includes")},cb29:function(t,e,a){var i=a("23e7"),r=a("81d5"),n=a("44d2");i({target:"Array",proto:!0},{fill:r}),n("fill")},e739:function(t,e,a){"use strict";a("9ef3")}}]);
//# sourceMappingURL=page-gis-map-floorplan~31ecd969.593cc44e.js.map