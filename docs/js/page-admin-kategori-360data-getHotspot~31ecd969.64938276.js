(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["page-admin-kategori-360data-getHotspot~31ecd969"],{"59b5":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.imageload?e("div",{staticStyle:{position:"absolute",top:"0px","z-index":"1000"}},[e("div",{staticClass:"bg-dark text-white",staticStyle:{width:"100vw"}},[e("div",{staticClass:"row "},t._l(t.loadnya,(function(a,o){return e("div",{key:o+"loadnya",staticClass:"col-1 bg-blue-400 text-center animated slideInLeft",staticStyle:{height:"25px"}},[0==o?e("span",[t._v(" Loading ")]):t._e()])})),0)])]):t._e(),t.modal?e("div",{staticStyle:{height:"100vh",width:"100vw",background:"transparent",position:"absolute","z-index":"100"},on:{click:function(a){t.modal=!1}}}):t._e(),t.modal?e("div",{staticStyle:{position:"fixed",top:"50%",left:"50%",transform:"translateX(-50%) translateY(-50%)","z-index":"1000"}},[e("div",{staticClass:"d-flex justify-content-center align-items-center",staticStyle:{height:"100vh"}},[e("div",{staticStyle:{width:"100%"}},[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"bg-white p-3 rounded-lg shadow",staticStyle:{height:"90vh",overflow:"scroll"}},[e("button",{staticClass:"btn btn-sm btn-danger  float-right",attrs:{type:"button"},on:{click:function(a){t.modal=!1,t.btn="tambah",t.vdata={size:250}}}},[t._v("x")]),e("a",{attrs:{href:"/#/office/360view?idgambar="+t.$route.query.idgambar,target:"__blank"}},[e("button",{staticClass:"btn btn-sm btn-dark  ",attrs:{type:"button"}},[t._v(" Preview ")])]),e("hr"),e("form",{on:{submit:function(a){return a.preventDefault(),t.submit(a)}}},[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-sm-9 p-2",staticStyle:{"font-size":"12px"}},[e("div",{staticClass:"shadow p-3 rounded-lg"},[e("div",{staticClass:"sm-form"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata.id,expression:"vdata.id"}],staticClass:"form-control form-control-sm",attrs:{type:"text",id:"id",name:"id",placeholder:"id",disabled:""},domProps:{value:t.vdata.id},on:{input:function(a){a.target.composing||t.$set(t.vdata,"id",a.target.value)}}})]),e("hr",{staticClass:"mt-2 mb-2"}),e("p",{staticClass:"font-semibold text-lg p-3"},[t._v("Hotspot untuk : "+t._s(t.$route.query.title))]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.vdata.type,expression:"vdata.type"}],staticClass:"form-control",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.vdata,"type",a.target.multiple?e:e[0])}}},[e("option",[t._v("Route")]),e("option",[t._v("Text")]),e("option",[t._v("Photo")]),e("option",[t._v("Video")])]),e("hr",{staticClass:"mt-2 mb-2"}),e("p",{staticClass:"font-semibold"},[t._v("Hotspot Point : ")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("div",{staticClass:"sm-form "},[e("label",{attrs:{for:"title"}},[t._v("Title")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata.title,expression:"vdata.title"}],staticClass:"form-control form-control-sm",attrs:{type:"text",id:"title",name:"title",placeholder:"title"},domProps:{value:t.vdata.title},on:{input:function(a){a.target.composing||t.$set(t.vdata,"title",a.target.value)}}})]),e("div",{staticClass:"sm-form "},[e("label",{attrs:{for:"hotspot"}},[t._v("hotspot")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata.hotspot,expression:"vdata.hotspot"}],staticClass:"form-control form-control-sm",attrs:{type:"text",id:"hotspot",name:"hotspot",placeholder:"hotspot point"},domProps:{value:t.vdata.hotspot},on:{input:function(a){a.target.composing||t.$set(t.vdata,"hotspot",a.target.value)}}})]),e("div",{staticClass:"sm-form "},[e("label",{attrs:{for:"size"}},[t._v("Size")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata.size,expression:"vdata.size"}],staticClass:"form-control form-control-sm",attrs:{type:"text",id:"size",name:"size",placeholder:"size"},domProps:{value:t.vdata.size},on:{input:function(a){a.target.composing||t.$set(t.vdata,"size",a.target.value)}}})])]),e("div",{staticClass:"col-6 text-center"},[e("br"),e("a",{attrs:{target:"__blank",href:"/#/admin/kategori/360data/getPoint?idgambar="+t.$route.query.idgambar+"&idpeta="+t.$route.query.idpeta}},[t._m(0)])]),e("div",{staticClass:"col-12"})]),e("hr",{staticClass:"mt-2 mb-2"}),"Route"==t.vdata.type?e("div",[e("p",{staticClass:"font-semibold"},[t._v("Route : ")]),e("v-select",{attrs:{options:t.listphoto,label:"title",reduce:function(t){return t.id}},model:{value:t.vdata.idroute,callback:function(a){t.$set(t.vdata,"idroute",a)},expression:"vdata.idroute"}}),e("label",{attrs:{for:"initialRoute"}},[t._v("Intial Route Koordinat")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("div",{staticClass:"sm-form "},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata.initialRoute,expression:"vdata.initialRoute"}],staticClass:"form-control form-control-sm",attrs:{type:"text",id:"initialRoute",name:"initialRoute",placeholder:"initialRoute point"},domProps:{value:t.vdata.initialRoute},on:{input:function(a){a.target.composing||t.$set(t.vdata,"initialRoute",a.target.value)}}})])]),e("div",{staticClass:"col-6"},[e("a",{attrs:{target:"__blank",href:"/#/admin/kategori/360data/getPoint?idgambar="+t.vdata.idroute+"&idpeta="+t.$route.query.idpeta}},[t._m(1)])])])],1):"Text"==t.vdata.type?e("div",[e("p",{staticClass:"font-semibold"},[t._v("Text : ")]),e("div",{staticClass:"sm-form"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.vdata.text,expression:"vdata.text"}],staticClass:"form-control md-textarea",attrs:{type:"text",id:"text",name:"text",rows:"2",placeholder:"text..."},domProps:{value:t.vdata.text},on:{input:function(a){a.target.composing||t.$set(t.vdata,"text",a.target.value)}}})])]):"Photo"==t.vdata.type?e("div",[e("p",{staticClass:"font-semibold"},[t._v("Photo : ")]),e("div",{staticClass:"sm-form "},[e("label",{attrs:{for:"gambar"}},[t._v("Your gambar")]),e("input",{staticClass:"form-control form-control-sm",attrs:{type:"file",id:"filenya",name:"gambar",placeholder:"gambar"},on:{change:t.upload}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata.gambar,expression:"vdata.gambar"}],staticClass:"form-control form-control-sm",attrs:{type:"text",id:"gambar",name:"gambar",placeholder:"gambar"},domProps:{value:t.vdata.gambar},on:{input:function(a){a.target.composing||t.$set(t.vdata,"gambar",a.target.value)}}})])]):"Video"==t.vdata.type?e("div",[e("p",{staticClass:"font-semibold"},[t._v("Text : ")]),e("div",{staticClass:"sm-form "},[e("label",{attrs:{for:"youtube"}},[t._v("Youtube")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata.youtube,expression:"vdata.youtube"}],staticClass:"form-control form-control-sm",attrs:{type:"text",id:"youtube",name:"youtube",placeholder:"youtube"},domProps:{value:t.vdata.youtube},on:{input:function(a){a.target.composing||t.$set(t.vdata,"youtube",a.target.value)}}})])]):t._e(),e("hr",{staticClass:"mt-2 mb-2"}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("p",{staticClass:"font-semibold"},[t._v("Icon : ")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.vdata.icon,expression:"vdata.icon"}],staticClass:"form-control",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.vdata,"icon",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"Info"}},[t._v("Info")]),e("option",{attrs:{value:"Arrow"}},[t._v("Arrow")]),e("option",{attrs:{value:"Custom"}},[t._v("Custom")])]),e("div",{staticClass:"sm-form "},[e("label",{attrs:{for:"iconnya"}},[t._v("Your iconnya")]),e("input",{staticClass:"form-control form-control-sm",attrs:{type:"file",id:"iconnya",name:"iconnya",placeholder:"iconnya"},on:{change:t.upload2}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata.iconnya,expression:"vdata.iconnya"}],staticClass:"form-control form-control-sm",attrs:{type:"text",id:"iconnya",name:"iconnya",placeholder:"iconnya"},domProps:{value:t.vdata.iconnya},on:{input:function(a){a.target.composing||t.$set(t.vdata,"iconnya",a.target.value)}}})])]),e("div",{staticClass:"col-6"},[e("p",{staticClass:"font-semibold"},[t._v("Detail : ")]),e("div",{staticClass:"sm-form"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.vdata.detail,expression:"vdata.detail"}],staticClass:"form-control md-textarea",attrs:{type:"text",id:"detail",name:"detail",rows:"2",placeholder:"detail..."},domProps:{value:t.vdata.detail},on:{input:function(a){a.target.composing||t.$set(t.vdata,"detail",a.target.value)}}})])]),e("hr",{staticClass:"mt-2 mb-2"})]),e("hr"),e("div",{staticClass:"mt-3 p-3"},[e("button",{staticClass:"btn btn-sm",class:"tambah"==t.btn?"btn-primary":"update"==t.btn?"btn-success":"btn-danger",attrs:{type:"submit"}},[e("span",{staticClass:"typcn typcn-info"}),t._v(" Proses "+t._s(t.btn)+" ")]),e("div",{staticClass:"float-right"},[e("button",{directives:[{name:"show",rawName:"v-show",value:"tambah"!=t.btn,expression:"btn!='tambah'"}],staticClass:"btn btn-sm btn-dark",attrs:{type:"button"},on:{click:function(a){t.btn="tambah",t.vdata={size:250}}}},[e("span",{staticClass:"typcn typcn-edit"}),t._v(" Tambah ")]),e("button",{directives:[{name:"show",rawName:"v-show",value:"tambah"!=t.btn,expression:"btn!='tambah'"}],staticClass:"ml-3 btn btn-sm btn-danger",attrs:{type:"button"},on:{click:function(a){t.btn="delete"}}},[e("span",{staticClass:"typcn typcn-delete"}),t._v(" Delete ")])])])])]),e("div",{staticClass:"col-sm-9 p-2",staticStyle:{"font-size":"12px"}},[e("div",{staticClass:"shadow rounded-lg"},[t.datanya.length>0?e("div",{staticClass:"p-2"},[e("div",{staticClass:"text-right"},[e("vue-json-excel",{attrs:{data:t.datanya}},[e("button",{staticClass:"btn btn-sm btn-dark",attrs:{type:"button"}},[t._v(" Export "),e("span",{staticClass:"typcn typcn-chart-area"})])])],1),e("Btables",{ref:"btable",attrs:{tables:t.datanya,cari:[""],hide:["gambar","point","idpeta","detail","text","initialRoute","idgambar","idroute","iconnya"]},on:{selected:t.ambil}})],1):t._e()])])])])])])])])])]):t._e(),t.mapready?e("div",[e("div",{staticStyle:{height:"100vh",width:"100vw"},attrs:{id:"container"}})]):t._e()])},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"btn btn-sm btn-dark  ",attrs:{type:"button"}},[t._v("View "),e("img",{staticClass:"d-inline",staticStyle:{height:"15px",width:"15px",filter:"brightness(0) invert(1)"},attrs:{src:"https://upload.egov.balangankab.go.id/svg/image.svg",alt:""}})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"btn btn-sm btn-dark  ",attrs:{type:"button"}},[t._v("View "),e("img",{staticClass:"d-inline",staticStyle:{height:"15px",width:"15px",filter:"brightness(0) invert(1)"},attrs:{src:"https://upload.egov.balangankab.go.id/svg/image.svg",alt:""}})])}],s=e("1da1"),n=e("ade3"),r=(e("4795"),e("4160"),e("159b"),e("e25e"),e("acd8"),e("96cf"),e("4b97")),l=e("6be6"),d=new r["a"],c={components:{Btables:l["a"]},data:function(){var t;return t={datanya:[],photo:[],listphoto:[],listHotspot:[],imageload:!0,loadnya:[],modal:!1,show:!1,ready:!1,mapready:!1,gambarUtama:"",btn:"tambah",vdata:{size:250}},Object(n["a"])(t,"btn","tambah"),Object(n["a"])(t,"info",{}),Object(n["a"])(t,"point",null),t},methods:{submit:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var e;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e=t,t.vdata.idpeta=t.$route.query.id,t.vdata.idgambar=t.$route.query.idgambar,!confirm("Apakah yakin proses dilanjutkan ?")){a.next=27;break}if("tambah"!=t.btn){a.next=13;break}return delete t.vdata.id,a.next=8,d.collection("app_gis_360data_hotspot",!0).doc().set(t.vdata);case 8:e.getDataAsli(),e.mapready=!1,e.inits(),a.next=27;break;case 13:if("update"!=t.btn){a.next=21;break}return a.next=16,d.collection("app_gis_360data_hotspot",!0).doc().set(t.vdata);case 16:e.getDataAsli(),e.mapready=!1,e.inits(),a.next=27;break;case 21:if("delete"!=t.btn){a.next=27;break}return a.next=24,d.collection("app_gis_360data_hotspot",!0).doc(t.vdata.id)["delete"]();case 24:e.getDataAsli(),e.mapready=!1,e.inits();case 27:case"end":return a.stop()}}),a)})))()},upload:function(){var t=this,a=document.querySelector("#filenya");d.collection("tbuser",!1).upload(a,!1,!0).then((function(a){console.log(a),t.vdata.gambar=a,t.$forceUpdate()}))},upload2:function(){var t=this,a=document.querySelector("#iconnya");d.collection("tbuser",!1).upload(a,!1,!0).then((function(a){console.log(a),t.vdata.iconnya=a,t.$forceUpdate()}))},getDataAsli:function(){var t=this;d.collection("app_gis_360data_hotspot",!1).doc().select("select * from app_gis_360data_hotspot where idgambar='".concat(this.$route.query.idgambar,"'")).then((function(a){t.datanya=a,t.$forceUpdate()}))},kopy:function(){navigator.clipboard.writeText(this.point).then((function(){d.alert("Copying Point ke Clipboard!","bg-green-400")}),(function(t){d.alert("Could not copy text: ")}))},getDatanya:function(){var t=this;this.ready=!1,d.collection("app_gis_360data_hotspot",!1).doc().select("select * from app_gis_360data_hotspot").then((function(a){t.datanya=a,t.ready=!0,t.$forceUpdate()}))},getData:function(){var t=this;d.collection("app_gis_360data",!1).doc().select("select * from app_gis_360data where id='".concat(this.$route.query.idgambar,"'")).then((function(a){console.log(a),t.photo=a,t.$forceUpdate()}))},getListPhoto:function(){var t=this;d.collection("app_gis_360data",!1).doc().select("select * from app_gis_360data where idpeta='".concat(this.$route.query.idpeta,"'")).then((function(a){console.log("listphoto",a),t.listphoto=a,t.$forceUpdate()}))},ambil:function(t){this.vdata=t,this.btn="update",this.$forceUpdate()},inits:function(){var t=this,a=this;this.mapready=!0,d.collection("app_gis_360data_hotspot",!1).doc().select("select tb1.type,tb1.initialRoute,tb1.icon,tb1.detail,tb1.text,tb1.gambar,tb1.idgambar,tb1.youtube,tb1.point,tb1.hotspot,tb1.idroute,tb1.idpeta,tb2.gambar as gambarnya ,tb1.iconnya,tb1.title,tb1.size\n                from app_gis_360data_hotspot tb1 left join app_gis_360data tb2 on tb2.id=tb1.idgambar where tb1.idgambar='".concat(this.$route.query.idgambar,"'")).then((function(e){a.listHotspot=e,console.log("listhotspot",e),setTimeout((function(){var a,e,o,i,s=t;i=document.querySelector("#container"),a=new PANOLENS.ImagePanorama(t.photo[0].gambar),a.addEventListener("enter-fade-start",(function(){o.tweenControlCenter(new THREE.Vector3(3800.69,-1119.69,5e3),0)})),a.addEventListener("progress",(function(t){s.imageload=!0,s.loadnya.push("1"),s.$forceUpdate(),console.log("image progress")})),a.addEventListener("load",(function(t){s.imageload=!1,s.loadnya=[],s.$forceUpdate()})),a.addEventListener("click",(function(t){if(s.show=!0,!(t.intersects.length>0)){var a=o.raycaster.intersectObject(o.panorama,!0)[0].point;navigator.clipboard.writeText(JSON.stringify(a)).then((function(){d.alert("Copy berhasil, Paste ke initial Route","bg-green-400"),s.$store.state.data.point=JSON.stringify(a),s.modal=!0}),(function(t){d.alert("Could not copy text: ")})),s.$forceUpdate()}})),o=new PANOLENS.Viewer({container:i,controlBar:!0,viewIndicator:!0,output:"console",indicatorSize:30,autoHideInfospot:!1});var n=[];s.listHotspot.forEach((function(t,e){console.log("icn",t.icon),"Custom"==t.icon?(n[e]=new PANOLENS.Infospot(parseInt(t.size),t.iconnya),n[e].position.set(parseFloat(JSON.parse(t.hotspot).x),parseFloat(JSON.parse(t.hotspot).y),parseFloat(JSON.parse(t.hotspot).z)),n[e].addHoverText(t.title),n[e].addEventListener("click",(function(){"Text"==t.type?(d.alert("Text"),s.$forceUpdate()):"Photo"==t.type?(d.alert("Photo"),s.$forceUpdate()):"Video"==t.type?(d.alert("Video"),s.$forceUpdate()):"Route"==t.type&&d.alert("Route")})),a.add(n[e])):("Arrow"==t.icon?n[e]=new PANOLENS.Infospot(parseInt(t.size),PANOLENS.DataImage.Arrow):"Info"==t.icon&&(n[e]=new PANOLENS.Infospot(parseInt(t.size),PANOLENS.DataImage.Info)),n[e].position.set(parseFloat(JSON.parse(t.hotspot).x),parseFloat(JSON.parse(t.hotspot).y),parseFloat(JSON.parse(t.hotspot).z)),n[e].addHoverText(t.title),n[e].addEventListener("click",(function(){"Text"==t.type?(d.alert("Text"),s.$forceUpdate()):"Photo"==t.type?(d.alert("Photo"),s.$forceUpdate()):"Video"==t.type?(d.alert("Video"),s.$forceUpdate()):"Route"==t.type&&d.alert("Route")})),a.add(n[e]))})),o.add(a,e),console.log(o),o.addUpdateCallback((function(){}))}),500),t.$forceUpdate()}))}},mounted:function(){this.getData(),this.getDataAsli(),this.inits(),this.getListPhoto()}},p=c,u=e("2877"),m=Object(u["a"])(p,o,i,!1,null,null,null);a["default"]=m.exports},"7e12":function(t,a,e){var o=e("da84"),i=e("58a8").trim,s=e("5899"),n=o.parseFloat,r=1/n(s+"-0")!==-1/0;t.exports=r?function(t){var a=i(String(t)),e=n(a);return 0===e&&"-"==a.charAt(0)?-0:e}:n},acd8:function(t,a,e){var o=e("23e7"),i=e("7e12");o({global:!0,forced:parseFloat!=i},{parseFloat:i})}}]);
//# sourceMappingURL=page-admin-kategori-360data-getHotspot~31ecd969.64938276.js.map